"use strict";(self.webpackChunkdatasheet=self.webpackChunkdatasheet||[]).push([[691],{7700:(e,t,a)=>{a.d(t,{Cm:()=>n,ND:()=>s,j2:()=>i,ti:()=>r});const s=(0,a(6223).UU)("https://zcvtgtaimnsrlemslypr.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpjdnRndGFpbW5zcmxlbXNseXByIiwicm9sZSI6ImFub24iLCJpYXQiOjE2ODY5NjMxNzYsImV4cCI6MjAwMjUzOTE3Nn0.xKr-K8J-6r-WnSj_75NhltNLkgUHQmd46hank5yLM2A"),r={apiKey:"b749c7e9133d47c69474f3546b2b2932",apiUrl:"https://tradingjournal.openai.azure.com/openai/deployments/TradingJournal/chat/completions?api-version=2024-02-15-preview",promptText:'"Based on the attached trading data in json format, which includes stock symbols, buy price, buy date, quantity, sell price, sell date, brokerage fees, days held, reasons for buying, and GTT (Good Till Triggered) status:'},n="positions_development",i="watchlist"},1691:(e,t,a)=>{a.r(t),a.d(t,{default:()=>g});var s=a(5043),r=a(9942),n=a(3003),i=a(579);function o(e){let{task:t,onClick:a}=e;const{attributes:s,listeners:n,setNodeRef:o,transform:c}=(0,r.PM)({id:t.id}),l=c?{transform:"translate(".concat(c.x,"px, ").concat(c.y,"px)")}:void 0;return(0,i.jsxs)("div",{ref:o,...n,...s,className:"cursor-grab rounded-lg bg-neutral-700 p-4 shadow-sm hover:shadow-md",style:l,children:[(0,i.jsx)("h3",{className:"font-medium text-neutral-100 underline cursor-pointer",onClick:()=>{a&&a()},children:t.title}),(0,i.jsx)("p",{className:"mt-2 text-sm text-neutral-400",children:t.description})]})}function c(e){let{column:t,tasks:a,onTaskClick:s}=e;const{setNodeRef:n}=(0,r.zM)({id:t.id});return(0,i.jsxs)("div",{className:"flex w-80 flex-col rounded-lg bg-neutral-800 p-4",children:[(0,i.jsx)("h2",{className:"mb-4 font-semibold text-neutral-100",children:t.title}),(0,i.jsx)("div",{ref:n,className:"flex flex-1 flex-col gap-4",children:0===a.length?(0,i.jsx)("div",{className:"flex items-center justify-center text-neutral-400",children:"Drop tasks here"}):a.map((e=>(0,i.jsx)(o,{task:e,onClick:()=>s&&s(e)},e.id)))})]})}var l=a(6446),d=a(7784),u=a(1906),p=a(5865),h=a(3368),m=a(2164),y=a(4783),x=a(4382);const f=[{id:"To Watch",title:"To Watch"},{id:"Researching",title:"Researching"},{id:"Ready To Buy",title:"Ready To Buy"},{id:"Bought",title:"Bought"},{id:"Ready To Sell",title:"Ready To Sell"}],g=()=>{const[e,t]=(0,s.useState)([]),[a,o]=(0,s.useState)(!1),[g,b]=(0,s.useState)({title:"",description:"",status:f[0].id}),j=(0,r.FR)((0,r.MS)(r.AN,{activationConstraint:{delay:150,tolerance:5}})),{userUUID:w}=(0,n.d4)((e=>e.public));(0,s.useEffect)((()=>{(async()=>{if(w)try{const{data:e,error:a}=await(0,x.o6)(w);a?console.error("Error fetching watchlist data:",a):t(e||[])}catch(e){console.error("Unexpected error fetching watchlist data:",e)}})()}),[w]);const k=()=>{o(!1),b({title:"",description:"",status:f[0].id})},v=e=>{console.log("Card clicked: ",e),b({title:e.title,description:e.description,status:e.status}),o(!0)},C=e=>{const{name:t,value:a}=e.target;b((e=>({...e,[t]:a})))};return(0,i.jsxs)(l.A,{sx:{padding:2},children:[(0,i.jsx)(l.A,{sx:{display:"flex",justifyContent:"flex-start",marginBottom:2},children:(0,i.jsx)(m.A,{label:"Add New Stock",type:"outlined",variant:"contained",className:"ledger-buttons get-insights",hoverType:"success-color",size:"sm",icon:(0,i.jsx)(y.A,{}),style:{width:"auto",padding:"8px 16px"},onClick:()=>{o(!0)}})}),(0,i.jsx)(r.Mp,{sensors:j,onDragEnd:async a=>{const{active:s,over:r}=a;if(!r||!r.id)return;const n=s.id,i=r.id;if(n&&i){t((e=>e.map((e=>e.id===n?{...e,status:i}:e))));(await(0,x.A7)(n,i)).success||(alert("Failed to update status in database. Reverting changes."),t((t=>t.map((t=>t.id===n?{...t,status:e.find((e=>e.id===n)).status}:t)))))}},children:(0,i.jsx)(l.A,{sx:{display:"flex",overflowX:"auto",gap:3},children:f.map((t=>(0,i.jsx)(l.A,{sx:{minWidth:300},children:(0,i.jsx)(c,{column:t,tasks:e.filter((e=>e.status===t.id)),onCardClick:v})},t.id)))})}),(0,i.jsx)(h.A,{open:a,onClose:k,"aria-labelledby":"add-new-stock-modal","aria-describedby":"add-new-stock-form",children:(0,i.jsxs)(l.A,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"1px solid #ddd",borderRadius:"8px",boxShadow:24,p:4},children:[(0,i.jsx)(p.A,{variant:"h6",gutterBottom:!0,children:g.title?"Edit Stock":"Add New Stock"}),(0,i.jsx)(d.A,{fullWidth:!0,label:"Stock Name",name:"title",value:g.title,onChange:C,margin:"normal"}),(0,i.jsx)(d.A,{fullWidth:!0,label:"Description",name:"description",value:g.description,onChange:C,margin:"normal",multiline:!0,rows:3}),(0,i.jsxs)(l.A,{mt:2,display:"flex",justifyContent:"space-between",children:[(0,i.jsx)(u.A,{variant:"contained",color:"primary",onClick:async()=>{if(!w)return void alert("User not identified. Please try again.");const e={...g,id:Date.now().toString(),userUUID:w};try{const{data:a,error:s}=await(0,x.o4)(e);if(s)return console.error("Error adding task to ledger:",s),void alert("Failed to add task. Please try again.");t((t=>[...t,e])),k()}catch(a){console.error("Unexpected error:",a),alert("An unexpected error occurred. Please try again.")}},children:"Save"}),(0,i.jsx)(u.A,{variant:"outlined",color:"secondary",onClick:k,children:"Cancel"})]})]})})]})}},4382:(e,t,a)=>{a.d(t,{A7:()=>u,Uh:()=>c,Wx:()=>o,Zw:()=>n,cB:()=>i,jp:()=>r,o4:()=>l,o6:()=>d});var s=a(7700);const r=async e=>await s.ND.from(s.Cm).select().eq("user_id",e).order("buy_date",{ascending:!0}),n=async e=>await s.ND.from(s.Cm).insert(e),i=async e=>await s.ND.from(s.Cm).delete().match({id:e}),o=async(e,t)=>await s.ND.from(s.Cm).update(t).match({id:e}),c=async e=>{const t={messages:[{role:"system",content:"With json data ".concat(JSON.stringify(e),", ").concat(s.ti.promptText)}],max_tokens:Math.min(e.length,1e3),temperature:.7,frequency_penalty:0,presence_penalty:0,top_p:.95,stop:null},a=await fetch(s.ti.apiUrl,{method:"POST",headers:{"Content-Type":"application/json","api-key":s.ti.apiKey,"Cache-Control":"no-cache"},body:JSON.stringify(t)});return(await a.json()).choices[0].message.content.split("\n").map((e=>e.trim()))},l=async e=>await s.ND.from(s.j2).insert(e),d=async e=>{try{const{data:t,error:a}=await s.ND.from(s.j2).select("*").eq("userUUID",e);return a?(console.error("Error fetching watchlist data:",a),{data:null,error:a}):{data:t,error:null}}catch(t){return console.error("Unexpected error fetching watchlist data:",t),{data:null,error:t}}},u=async(e,t)=>{try{const{error:a}=await s.ND.from(s.j2).update({status:t}).eq("id",e);return a?(console.error("Error updating status in database:",a),{success:!1,error:a}):{success:!0}}catch(a){return console.error("Unexpected error updating status:",a),{success:!1,error:a}}}},2164:(e,t,a)=>{a.d(t,{A:()=>n});var s=a(1906),r=(a(5043),a(579));const n=e=>{let{type:t,label:a,size:n="lg",disable:i=!1,onClick:o,htmlType:c=null,className:l,icon:d,width:u,style:p,variant:h,hoverType:m}=e;const{pixels:y,unit:x}=u||{pixels:null,unit:null},f={width:u&&"object"===typeof u?"".concat(y).concat(x):"".concat(u,"px"),...p,backgroundColor:"#38b88d"};return(0,r.jsx)(s.A,{type:c,id:a,startIcon:d,className:"".concat(l," button-box-shadow ledger-button button-").concat(n||"default"," ").concat("".concat(t,i?"-disabled":"-enabled")).concat(m?" "+m:""),onClick:e=>{e.preventDefault(),!i&&o&&o(e)},style:{...f},variant:h,disabled:i,children:a&&a})}}}]);
//# sourceMappingURL=691.18b02cc1.chunk.js.map